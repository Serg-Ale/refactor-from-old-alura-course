echo "🚀 Running pre-push hooks..."
echo "🔨 Building project..."
pnpm run build

echo "🧪 Running tests..."
# Run tests and capture the output (run once, not watch mode)
TEST_OUTPUT=$(pnpm exec vitest run 2>&1)

# Check if tests passed
if echo "$TEST_OUTPUT" | grep -q "Test Files.*failed"; then
  echo "❌ Tests failed! Fix the failing tests before pushing."
  exit 1
fi

echo "✅ All tests passed!"
echo "✅ Pre-push checks passed!"
